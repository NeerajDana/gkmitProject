(this.webpackJsonpgkmitproject=this.webpackJsonpgkmitproject||[]).push([[0],{172:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(26),l=a.n(c);a(89),a(90),a(62);function o(){return n.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-dark bg-dark"},n.a.createElement("a",{class:"navbar-brand mx-auto",href:"#"},"Police Department of berlin"))}function s(e){var t=e.children;return n.a.createElement(n.a.Fragment,null,n.a.createElement(o,null),n.a.createElement("div",{className:"container"},t))}var i=a(32),u=a(14),m=a(19),d=a(10),E=a.n(d),p={cases:null,filters:{occurred_after:E()().subtract("5","Y").format("X"),occurred_before:E()().format("X"),incident_type:"theft",proximity:"delhi",query:""},pageSize:10,loading:!1,error:null},f=a(57),g=a.n(f);a(95);function b(){var e=Object(m.c)((function(e){return e.casesState})),t=e.filters,a=e.loading,r=e.pageSize,c=Object(m.b)(),l=function(e,a){console.log(E()(a).format("X")),c({type:"UPDATE_FILTER",payload:Object(u.a)({},t,Object(i.a)({},e,E()(a).format("X")))})};return n.a.createElement("div",{class:"form-row"},n.a.createElement("div",{class:"col-4"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Search By Title"),n.a.createElement("input",{type:"text",name:"query",value:t.query,onChange:function(e){c({type:"UPDATE_FILTER",payload:Object(u.a)({},t,Object(i.a)({},e.target.name,e.target.value))})},class:"form-control",placeholder:"search by title"}))),n.a.createElement("div",{class:"col-3"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Start Date"),n.a.createElement(g.a,{id:"example-datepicker",className:"form-control",value:E.a.unix(t.occurred_after).toDate(),selected:E.a.unix(t.occurred_after).toDate(),onChange:function(e){l("occurred_after",e)}}))),n.a.createElement("div",{class:"col-3"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"End Date"),n.a.createElement(g.a,{id:"example-datepicker",className:"form-control",value:E.a.unix(t.occurred_before).toDate(),selected:E.a.unix(t.occurred_before).toDate(),onChange:function(e){console.log(E.a.unix(t.occurred_before).toDate()),l("occurred_before",e)}}))),n.a.createElement("div",{className:"col-2"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleFormControlSelect1"},"Cases Per Page"),n.a.createElement("select",{name:"pageSize",onChange:function(e){var t;t=e.target.value,c({type:"UPDATE_PAGE_SIZE",payload:t})},value:r,class:"form-control",id:"exampleFormControlSelect1"},n.a.createElement("option",null,"5"),n.a.createElement("option",null,"10"),n.a.createElement("option",null,"25"),n.a.createElement("option",null,"50"),n.a.createElement("option",null,"100")))),n.a.createElement("div",{class:"col-4"},n.a.createElement("div",{class:"form-group text-left"},n.a.createElement("button",{onClick:function(){c({type:"CASES_FETCH"})},class:"btn btn-outline-dark",type:"button",disabled:a},a&&n.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),a?" Loading...":" Find Cases"))))}var v=a(60);function h(e){var t=e.item,a=t.title,r=t.description,c=t.occurred_at,l=t.updated_at,o=t.media,s=t.address;return n.a.createElement("div",{className:"my-1 p-1"},n.a.createElement("div",{class:"card case-card"},n.a.createElement("div",{className:"row align-items-center"},n.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-12"},n.a.createElement("img",{className:"img-fluid rounded p-2 w-100",style:{height:"10rem"},src:o.image_url?o.image_url:"https://images.unsplash.com/photo-1558981403-c5f9899a28bc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"})),n.a.createElement("div",{className:"col-lg-9 col-md-4 col-sm-12"},n.a.createElement("div",{className:"card-body pl-0 "},n.a.createElement("span",{class:"title"},a),n.a.createElement("br",null),n.a.createElement("span",{class:"description"},r||a),n.a.createElement("br",null),n.a.createElement("span",{className:"date"},"Occurance : ",E.a.unix(c).format("LLL")," - ",s),n.a.createElement("br",null),n.a.createElement("span",{className:"date"},"Reported : ",E.a.unix(l).format("LLL")))))))}function S(e){var t=e.error;return n.a.createElement("div",{class:"col-7"},n.a.createElement("div",{class:"form-group text-right"},n.a.createElement("p",{className:"text-danger"},t)))}function _(){return n.a.createElement("div",{class:"col-7"},n.a.createElement("div",{class:"form-group text-right"},n.a.createElement("p",{className:"text-info"},"No result found for your search ")))}var O=a(82),x=function(e){var t=e.setcurrentPage,a=(e.currentPage,e.totalPages),r=Object(O.a)(Array(a).keys());return n.a.createElement("div",{className:"my-3 p-3"},n.a.createElement("nav",{"aria-label":"Page navigation example"},n.a.createElement("ul",{class:"pagination justify-content-start"},r.map((function(e,a){return n.a.createElement("li",{class:"page-item"},n.a.createElement("a",{onClick:function(){return t(a)},class:"page-link  text-dark",href:"#"},a+1))})))))},y=a(79);function j(){var e=Object(m.c)((function(e){return e.casesState})),t=e.cases,a=e.error,c=e.pageSize,l=Object(r.useState)(0),o=Object(v.a)(l,2),s=o[0],i=o[1],u=Object(r.useState)(),d=Object(v.a)(u,2),E=d[0],p=d[1];return Object(r.useEffect)((function(){if(t&&t.length){var e=Object(y.chunk)(t,c);p(e)}else p(void 0);return function(){}}),[t,c]),a?(console.log("return from here"),n.a.createElement(S,{error:a})):t&&0==t.length?n.a.createElement(_,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"my-3 p-3"},E&&n.a.createElement(n.a.Fragment,null,E[s].map((function(e){return n.a.createElement(h,{key:e.id,item:e})})),E&&E.length>1&&n.a.createElement(x,{setcurrentPage:i,totalPages:E.length,currentPage:s}))))}function C(){var e=Object(m.b)();return Object(r.useEffect)((function(){return e({type:"CASES_FETCH"}),function(){}}),[]),n.a.createElement("div",{className:"row mt-4 p-3"},n.a.createElement("div",{className:"col-11 mx-auto"},n.a.createElement(b,null),n.a.createElement(j,null)))}var k=a(83),T=a(20),w=a(21),A=a.n(w),N=a(24),F=a(80),P=a(81),D=a.n(P),L=function(){var e=Object(F.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(t).filter((function(e){return t[e]})).map((function(e){return e+"="+t[e]})).join("&"),e.abrupt("return",D.a.get("".concat("https://bikewise.org:443/api/v2","/incidents?").concat(a)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=A.a.mark(H);function H(e){var t,a,r,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.a)({type:"CASES_FETCH_START"});case 3:return e.next=5,Object(N.b)((function(e){return e.casesState}));case 5:return t=e.sent,a=t.filters,e.next=9,L(a);case 9:return r=e.sent,n=r.data,e.next=13,Object(N.a)({type:"CASES_FETCH_SUCCESS",payload:n.incidents});case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),e.next=19,Object(N.a)({type:"CASES_FETCH_FAIL",payload:e.t0.response?e.t0.response.data.message:e.t0.message});case 19:case"end":return e.stop()}}),I,null,[[0,15]])}var U=A.a.mark(R);function R(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)("CASES_FETCH",H);case 2:case"end":return e.stop()}}),U)}var X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,z=Object(T.c)({casesState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CASES_FETCH_SUCCESS":return Object(u.a)({},e,{cases:r,error:null,loading:!1});case"CASES_FETCH_START":return Object(u.a)({},e,{loading:!0,error:null,cases:void 0});case"CASES_FETCH_FAIL":return Object(u.a)({},e,{error:r,cases:null,loading:!1});case"UPDATE_FILTER":return Object(u.a)({},e,{filters:Object(u.a)({},r)});case"UPDATE_PAGE_SIZE":return Object(u.a)({},e,{pageSize:r});default:return Object(u.a)({},e)}}}),q=Object(k.a)(),B=Object(T.e)(z,X(Object(T.a)(q)));q.run(R);var J=function(){return n.a.createElement(m.a,{store:B},n.a.createElement(s,null,n.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){},84:function(e,t,a){e.exports=a(172)},89:function(e,t,a){},90:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[84,1,2]]]);
//# sourceMappingURL=main.80c1a347.chunk.js.map